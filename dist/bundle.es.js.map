{"version":3,"file":"bundle.es.js","sources":["../src/index.js"],"sourcesContent":["import {Emitter} from 'more-events';\nconst now = Date.now ? Date.now : ()=>new Date().getTime();\n\nexport default class TimerChain extends Emitter {\n    constructor(list = [], {\n        sync = true\n    } = {}){\n        super();\n\n        let current = list[0];\n\n        this.list = list;\n        this.index = 0;\n        this.synchronize = sync;\n\n        Object.defineProperty(this, 'current', {\n            get(){ return current; }\n        });\n\n        const onTick = (...args)=>{\n            return this.emit('tick', ...args);\n        };\n\n        current.on('tick', onTick);\n\n        list.forEach((timer, i)=>{\n\n            if(typeof timer.start !== 'function'){\n                throw new Error(`Timer does not have a start method`);\n            }\n\n            if(i === list.length - 1){\n                timer.on('complete', ()=>{\n                    this.emit('complete');\n                });\n                return;\n            }\n\n            timer.on('complete', (time)=>{\n                current.off('tick', onTick);\n                let present = now();\n                current = list[++this.index];\n                current.on('tick', onTick);\n                let diff = present - time;\n                let wait = current.interval - diff;\n                current.start(wait);\n            });\n        });\n    }\n    start(){\n        if(typeof this.current.start !== 'function'){\n            throw new Error(`Timer does not have a start method`);\n        }\n        console.log('this.current ',this.current)\n        this.current.start();\n        this.emit('start', this.current.startTime || now());\n        return this;\n    }\n    pause(){\n        if(typeof this.current.pause !== 'function'){\n            throw new Error(`Timer does not have a pause method`);\n        }\n        this.current.pause();\n        this.emit('pause');\n        return this;\n    }\n    stop(){\n        if(typeof this.current.stop !== 'function'){\n            throw new Error(`Timer does not have a stop method`);\n        }\n        this.current.stop();\n        this.emit('stop');\n        return this;\n    }\n}\n"],"names":["const","super","let","this"],"mappings":"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"}