{"version":3,"file":"timer-chain.js","sources":["../node_modules/more-events/dist/bundle.es.js","../src/index.js"],"sourcesContent":["var Handler = function Handler(name, listener, matchListener){\n    if ( matchListener === void 0 ) matchListener = null;\n\n    this.name = name;\n    this.matchListener = this.listener = listener;\n    if(matchListener !== null){\n        this.matchListener = matchListener;\n    }\n};\n\nvar MoreEvents = function MoreEvents(context){\n    this.listeners = {};\n    this.__context = context === void 0 ? this : context;\n};\nMoreEvents.prototype.addListener = function addListener (name, listener, matchListener){\n    if(this.listeners[name] === void 0){\n        this.listeners[name] = [];\n    }\n    this.listeners[name].push(new Handler(name, listener, matchListener));\n\n    return this;\n};\nMoreEvents.prototype.removeListener = function removeListener (name, listener){\n        var this$1 = this;\n\n    if(this.listeners[name] === void 0 || !this.listeners[name].length)\n        { return this; }\n\n    for(var i=0; i<this.listeners[name].length; i++){\n        var current = this$1.listeners[name][i];\n        //The matchListener might be different\n        //than the actual listener\n        if(current.matchListener === listener){\n            this$1.listeners[name].splice(i, 1);\n            --i;\n        }\n    }\n\n    return this;\n};\nMoreEvents.prototype.emitListeners = function emitListeners (name){\n        var this$1 = this;\n        var args = [], len = arguments.length - 1;\n        while ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n\n    if(this.listeners[name] === void 0 || !this.listeners[name].length) { return; }\n\n    for(var i=0; i<this.listeners[name].length; i++){\n        (this$1.listeners[name][i].listener)\n        .apply(this$1.__context, args);\n    }\n    return this;\n};\nMoreEvents.prototype.removeAll = function removeAll (name){\n    delete this.listeners[name];\n};\nMoreEvents.prototype.dispose = function dispose (){\n    this.listeners = this.__context = null;\n};\n\nvar Emitter = (function (MoreEvents) {\n    function Emitter(context){\n        MoreEvents.call(this, context);\n    }\n\n    if ( MoreEvents ) Emitter.__proto__ = MoreEvents;\n    Emitter.prototype = Object.create( MoreEvents && MoreEvents.prototype );\n    Emitter.prototype.constructor = Emitter;\n    Emitter.prototype.on = function on (name, listener){\n        return this.addListener(name, listener);\n    };\n    Emitter.prototype.off = function off (name, listener){\n        return this.removeListener(name, listener);\n    };\n    Emitter.prototype.one = function one (name, listener){\n        return this.on(name, onceListener);\n    };\n    Emitter.prototype.emit = function emit (name){\n        var args = [], len = arguments.length - 1;\n        while ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n\n        return (ref = this).emitListeners.apply(ref, [ name ].concat( args ));\n        var ref;\n    };\n    Emitter.prototype.clear = function clear (name){\n        this.removeAll(name);\n    };\n\n    return Emitter;\n}(MoreEvents));\n\nexport { Emitter };\n//# sourceMappingURL=bundle.es.js.map\n","import {Emitter} from 'more-events';\nconst now = Date.now ? Date.now : ()=>new Date().getTime();\n\nexport default class TimerChain extends Emitter {\n    constructor(list = [], {\n        sync = true\n    } = {}){\n        super();\n\n        let current = list[0];\n\n        this.list = list;\n        this.index = 0;\n        this.synchronize = sync;\n\n        Object.defineProperty(this, 'current', {\n            get(){ return current; }\n        });\n\n        const onTick = (...args)=>{\n            return this.emit('tick', ...args);\n        };\n\n        current.on('tick', onTick);\n\n        list.forEach((timer, i)=>{\n\n            if(typeof timer.start !== 'function'){\n                throw new Error(`Timer does not have a start method`);\n            }\n\n            if(i === list.length - 1){\n                timer.on('complete', ()=>{\n                    this.emit('complete');\n                });\n                return;\n            }\n\n            timer.on('complete', (time)=>{\n                current.off('tick', onTick);\n                let present = now();\n                current = list[++this.index];\n                current.on('tick', onTick);\n                let diff = present - time;\n                let wait = current.interval - diff;\n                current.start(wait);\n            });\n        });\n    }\n    start(){\n        if(typeof this.current.start !== 'function'){\n            throw new Error(`Timer does not have a start method`);\n        }\n        console.log('this.current ',this.current)\n        this.current.start();\n        this.emit('start', this.current.startTime || now());\n        return this;\n    }\n    pause(){\n        if(typeof this.current.pause !== 'function'){\n            throw new Error(`Timer does not have a pause method`);\n        }\n        this.current.pause();\n        this.emit('pause');\n        return this;\n    }\n    stop(){\n        if(typeof this.current.stop !== 'function'){\n            throw new Error(`Timer does not have a stop method`);\n        }\n        this.current.stop();\n        this.emit('stop');\n        return this;\n    }\n}\n"],"names":["arguments","const","super","let","this"],"mappings":"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"}